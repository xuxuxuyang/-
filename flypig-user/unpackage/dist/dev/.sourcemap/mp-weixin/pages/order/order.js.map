{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/github/flypig/flypig-user/pages/order/order.vue?e54e","webpack:///C:/Users/Administrator/Desktop/github/flypig/flypig-user/pages/order/order.vue?0d90","webpack:///C:/Users/Administrator/Desktop/github/flypig/flypig-user/pages/order/order.vue?80c0","webpack:///C:/Users/Administrator/Desktop/github/flypig/flypig-user/pages/order/order.vue?f1c4","uni-app:///pages/order/order.vue","webpack:///C:/Users/Administrator/Desktop/github/flypig/flypig-user/pages/order/order.vue?4869","webpack:///C:/Users/Administrator/Desktop/github/flypig/flypig-user/pages/order/order.vue?fbd2"],"names":["createPage","Page"],"mappings":"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","file":"pages/order/order.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order/order.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order.vue?vue&type=template&id=127632e4&\"\nvar renderjs\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/order.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=template&id=127632e4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=script&lang=js&\"","<template>\r\n\t\t<view class=\"order-view\">\r\n\t\t\t<!-- 提示 -->\r\n\t\t\t<view class=\"order-conter\">\r\n\t\t\t\t<!-- 遍历 -->\r\n\t\t\t\t<block v-for=\"(item,index) in orderdata\" :key=\"index\">\r\n\t\t\t\t<view class=\"order-data\">\r\n\t\t\t\t\t<view class=\"order-title\">\r\n\t\t\t\t\t\t<image :src=\"item.logoimg\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t<text>{{item.enterprise}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"order-text\">\r\n\t\t\t\t\t{{item.title}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detailed\">\r\n\t\t\t\t\t\t<text>出游人</text>\r\n\t\t\t\t\t\t<text>刘佳美</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detailed\">\r\n\t\t\t\t\t\t<text>购买数量</text>\r\n\t\t\t\t\t\t<text>{{item.many}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detailed\">\r\n\t\t\t\t\t\t<text>出发地</text>\r\n\t\t\t\t\t\t<text>{{item.departure}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"detailed\">\r\n\t\t\t\t\t\t<text>出行日期</text>\r\n\t\t\t\t\t\t<text>{{item.datetime}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t\t<!-- 联系人 -->\r\n\t\t\t<view class=\"Contacts\">\r\n\t\t\t\t<view class=\"order-pople\">出行人</view>\r\n\t\t\t\t<view class=\"cart-go\">\r\n\t\t\t\t\t<text>姓名</text>\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"请输入姓名\" placeholder-class=\"place\" v-model=\"name\"/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cart-go\">\r\n\t\t\t\t\t<text>手机号</text>\r\n\t\t\t\t\t<input type=\"number\" placeholder=\"请输入手机号\" placeholder-class=\"place\" v-model=\"phone\"/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cart-go\">\r\n\t\t\t\t\t<text>身份证</text>\r\n\t\t\t\t\t<input type=\"number\" placeholder=\"请输入身份证号码\" placeholder-class=\"place\" v-model=\"carded\"/>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 高度撑开 -->\r\n\t\t\t<view style=\"height: 200upx;\"></view>\r\n\t\t\t<!-- 去付款 -->\r\n\t\t\t<view class=\"shopping\">\r\n\t\t\t\t<view class=\"shop-view\">\r\n\t\t\t\t\t<view>￥{{obtainprice}}</view>\r\n\t\t\t\t\t<view class=\"shopdata\" @click=\"btnShopping(btndata)\">\r\n\t\t\t\t\t\t去付款\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 提示组件 -->\r\n\t\t\t<HMmessages ref=\"HMmessages\" @complete=\"HMmessages = $refs.HMmessages\" @clickMessage=\"clickMessage\"></HMmessages>\r\n\t\t\t<!-- 进入页面的loading -->\r\n\t\t\t<home-load v-if=\"homeload\"></home-load>\r\n\t\t</view>\n</template>\n\n<script>\r\n\t// 引入提示组件\r\n\timport HMmessages from \"@/components/HM-messages/HM-messages.vue\"\r\n\t// 引进错误提示\r\n\timport {erring} from '../../common/erring.js'\r\n\t// 引入数据库\r\n\tvar db = wx.cloud.database()\r\n\tvar shopdatabase = db.collection('Shopping')\r\n\tvar orderCollection = db.collection('Order')\r\n\t// 引入微信支付云函数请求\r\n\timport {wxpay} from '../../common/wxpay.js'\r\n\texport default{\r\n\t\tname:'orderdata',\r\n\t\tcomponents:{\r\n\t\t\tHMmessages\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\thomeload:true,\r\n\t\t\t\torderdata:[],\r\n\t\t\t\tobtainprice:'',\r\n\t\t\t\tname:'',\r\n\t\t\t\tphone:'',\r\n\t\t\t\tcarded:'',\r\n\t\t\t\t// 微信支付相关\r\n\t\t\t\tPlaceorder:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 从购物车查询拉下选中的订单数据\r\n\t\t\torDerdata(){\r\n\t\t\t\tshopdatabase.where({\r\n\t\t\t\t\tSelection:'show'\r\n\t\t\t\t})\r\n\t\t\t\t.get()\r\n\t\t\t\t.then((res)=>{\r\n\t\t\t\t\tthis.orderdata = res.data\r\n\t\t\t\t\tthis.homeload = false\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 去付款生成订单前解决必填项\r\n\t\t\tbtnShopping(){\r\n\t\t\t\terring(this.name,this.phone,this.carded)\r\n\t\t\t\t.then((res)=>{\r\n\t\t\t\t\tif(res == 'SUCCESS'){\r\n\t\t\t\t\t\tthis.weChatorder()\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlet icon = 'danger'\r\n\t\t\t\t\t\tthis.tips(res,icon)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 开始下单\r\n\t\t\tasync weChatorder(){\r\n\t\t\t\t// 提示下单，反馈\r\n\t\t\t\twx.showToast({\r\n\t\t\t\t\ttitle:'正在下单',\r\n\t\t\t\t\ticon:'loading',\r\n\t\t\t\t\tmask:true,\r\n\t\t\t\t})\r\n\t\t\t\t// 出行人对象\r\n\t\t\t\tlet peopleobj = {\r\n\t\t\t\t\tname:this.name,\r\n\t\t\t\t\tphone:this.phone,\r\n\t\t\t\t\tcarded:this.carded\r\n\t\t\t\t}\r\n\t\t\t\t// 把付款的旅游信息和出行人生成已付款的订单[以对象形式存储]\r\n\t\t\t\tlet Paymentinfor = {\r\n\t\t\t\t\tpeopleobj,\r\n\t\t\t\t\tarrinfo:this.orderdata\r\n\t\t\t\t}\r\n\t\t\t\tlet ids = this.orderdata[0].shopid \r\n\t\t\t\tlet ide = ids.slice(0,7)\r\n\t\t\t\tlet commod = this.orderdata[0].title\r\n\t\t\t\t// 调用云函数统一下单\r\n\t\t\t\tlet Placeorder = await this.placeOrder(ide,commod,Paymentinfor)\r\n\t\t\t\t// console.log(Placeorder)\r\n\t\t\t\t// // 获取订单信息\r\n\t\t\t\tlet Orderinfo = await this.orderInfo(Placeorder)\r\n\t\t\t\t// // 调用接口发起支付\r\n\t\t\t\tlet wxpay = await this.wxPay(Orderinfo,Placeorder)\r\n\t\t\t\t// // 查询时候支付成功\r\n\t\t\t\tlet paysucc = await this.paySucc(Orderinfo,Placeorder)\r\n\t\t\t},\r\n\t\t\t// 统一下单生成订单\r\n\t\t\tplaceOrder(ide,commod,Paymentinfor){\r\n\t\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t\tlet wxData = {\r\n\t\t\t\t\t\t\t\t\ttype:'placeOrder',\r\n\t\t\t\t\t\t            goodId: ide,\r\n\t\t\t\t\t\t\t\t\tcommodity:commod,\r\n\t\t\t\t\t\t\t\t\tPrice:this.obtainprice,\r\n\t\t\t\t\t\t\t\t\tPaymentinfor:Paymentinfor\r\n\t\t\t\t\t\t        }\r\n\t\t\t\t\twxpay(wxData)\r\n\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\tlet ides = res.result.orderdata._id\r\n\t\t\t\t\t\tresolve(ides)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取订单信息\r\n\t\t\torderInfo(Placeorder){\r\n\t\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t\tlet wxData = {\r\n\t\t\t\t\t\t\t\t\ttype:'queryorder',\r\n\t\t\t\t\t\t            Placeorder:Placeorder\r\n\t\t\t\t\t\t        }\r\n\t\t\t\t\twxpay(wxData)\r\n\t\t\t\t\t.then((res)=>{\t\t\t\r\n\t\t\t\t\t\tlet objorder = res.result.result.data[0]\r\n\t\t\t\t\t\tresolve(objorder)\r\n\t\t\t\t\t\t// 取消下单提示\r\n\t\t\t\t\t\twx.hideToast()\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t// 给予提示\r\n\t\t\t\t\t\tlet tip = '支付出现错误'\r\n\t\t\t\t\t\tlet icon = 'danger'\r\n\t\t\t\t\t\tthis.tips(tip,icon)\r\n\t\t\t\t\t\t// 取消下单提示\r\n\t\t\t\t\t\twx.hideToast()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 发起微信支付\r\n\t\t\twxPay(Orderinfo,Placeorder){\r\n\t\t\t\treturn new Promise((reslove,reject)=>{\r\n\t\t\t\t\twx.requestPayment({\r\n\t\t\t\t\t\ttimeStamp: Orderinfo.time_stamp,\r\n\t\t\t\t\t\tnonceStr: Orderinfo.nonceStr,\r\n\t\t\t\t\t\tpackage: `prepay_id=${Orderinfo.prepayId}`,\r\n\t\t\t\t\t\tsignType: 'MD5',\r\n\t\t\t\t\t\tpaySign: Orderinfo.payauto,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\treslove(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t// 给予提示\r\n\t\t\t\t\t\t\tlet tip = '支付错误'\r\n\t\t\t\t\t\t\tlet icon = 'success'\r\n\t\t\t\t\t\t\tthis.tips(tip,icon)\r\n\t\t\t\t\t\t\t// 用户取消支付删掉数据库订单\r\n\t\t\t\t\t\t\torderCollection.doc(Placeorder).remove()\r\n\t\t\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 查询是否支付成功\r\n\t\t\tpaySucc(Orderinfo,Placeorder){\r\n\t\t\t\treturn new Promise((reslove,reject)=>{\r\n\t\t\t\t\tlet wxData = {\r\n\t\t\t\t\t\t\t\ttype:'paysucc',\r\n\t\t\t\t\t\t\t\tPlaceorder:Placeorder,\r\n\t\t\t\t\t            out_trade_no:Orderinfo.out_trade_no\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\twxpay(wxData)\r\n\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\tconsole.log(res.result.tips)\r\n\t\t\t\t\t\treslove(res)\r\n\t\t\t\t\t\tif(res.result.tips == '支付成功'){\r\n\t\t\t\t\t\t\t// 给予提示\r\n\t\t\t\t\t\t\tlet tip = '购买成功'\r\n\t\t\t\t\t\t\tlet icon = 'success'\r\n\t\t\t\t\t\t\tthis.tips(tip,icon)\r\n\t\t\t\t\t\t\t// 支付成功关闭当前页面跳转到订单页面\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl: '../Myorder/myorder'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 提示框\r\n\t\t\ttips(tip,icon){\r\n\t\t\t\tthis.HMmessages.show(tip,{icon:icon,iconColor:\"#ffffff\", fontColor:\"#ffffff\", background:\"rgba(102, 0, 51,.8)\"})\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\t// 取到总价和是从哪个页面跳转来的\r\n\t\t\tlet ids = JSON.parse(e.ids)\r\n\t\t\t// 判断是购物车还是直接下单\r\n\t\t\tif(ids.page == 'Shopping'){\r\n\t\t\t\t// 购物车\r\n\t\t\t\t// 从购物车拉下选中的订单数据\r\n\t\t\t\t// 取到总价\r\n\t\t\t\tthis.obtainprice = ids.obtainprice\r\n\t\t\t\tthis.orDerdata()\r\n\t\t\t}else{\r\n\t\t\t\tthis.obtainprice = ids.orderdata[0].totalPrice\r\n\t\t\t\tthis.orderdata = ids.orderdata\r\n\t\t\t\tthis.homeload = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\tpage{background: #f4f4f4;}\r\n\t.listmen{color: red;}\r\n\t.order-conter{\r\n\tmargin: 15upx;\r\n\tbackground: #FFFFFF; border-radius: 10upx;\r\n\tfont-size: 30upx;\r\n\tpadding: 10upx;}\r\n\t/* 内容 */\r\n\t.order-title{display: flex; align-items: center;}\r\n\t.order-title image{width: 50upx; height: 50upx; border-radius: 6upx;}\r\n\t.order-title text{font-weight: bold; padding-left: 8upx;}\r\n\t.order-text{font-weight: bold; padding: 10upx 0;}\r\n\t.detailed{display: flex; height: 50upx;\r\n\talign-items: center;\r\n\tpadding: 7upx 0;}\r\n\t.detailed text:nth-child(1){ width: 170upx;}\r\n\t.order-data{border-bottom: 1px dashed #e0e0e0;\r\n\tmargin-bottom: 10upx;\n\t}\r\n\t/* 联系人 */\r\n\t.Contacts{margin: 20upx 15upx; background: #FFFFFF; border-radius: 10upx;\r\n\tfont-size: 30upx;\r\n\tpadding: 10upx;}\r\n\t.order-pople{font-weight: bold; padding: 20upx 0 30upx 0;}\r\n\t.cart-go{ display: flex;\r\n\t align-items: center;\r\n\t height: 80upx;\r\n\t border-top: 1rpx solid #F8F8F8;}\r\n\t.cart-go text{width: 200upx; height: 50upx;\r\n\tline-height: 50upx;}\r\n\t.cart-go input{width: 100%;height: 50upx;\r\n\tline-height: 50upx;\r\n\t}\r\n\t.place{color: #d4d4d4;}\r\n\t/* 去付款 */\r\n\t.shopping{width: 100%; background: #ffffff;\r\n\tborder-top: 1rpx solid #e5e5e5;\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tz-index: 99;\r\n\t}\r\n\t.shopdata{background: linear-gradient(to right, #ffc800 10%, #ff9602 80%);\r\n\theight: 80upx; line-height: 80upx; width: 300upx;\r\n\tcolor: #ffffff;\r\n\tborder-radius: 50upx;\r\n\tfont-weight: 100;\r\n\t}\r\n\t\r\n\t.shop-view{display: flex; justify-content: space-between; align-items: center;\r\n\ttext-align: center;\r\n\tpadding: 10upx 20upx;\r\n\tfont-size: 30upx;\r\n\tcolor: #ff5000;\r\n\tfont-weight: bold;}\r\n\t</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1635993390547\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}