(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/business/business"],{2967:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("2f62");function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){s(e,n,t[n])})}return e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var i=function(){return t.e("pages/business/components/navs").then(t.bind(null,"aa1e"))},c=function(){return Promise.all([t.e("common/vendor"),t.e("pages/business/components/banner")]).then(t.bind(null,"9187"))},l=function(){return t.e("pages/business/components/businessing").then(t.bind(null,"2aa2"))},r=function(){return t.e("pages/business/components/matter").then(t.bind(null,"6af1"))},u=function(){return Promise.all([t.e("common/vendor"),t.e("pages/business/components/message")]).then(t.bind(null,"4b06"))},d=function(){return t.e("pages/business/components/shopping").then(t.bind(null,"c47e"))},f=wx.cloud.database(),g=f.collection("Commodity"),h=f.collection("message"),b={components:{Navs:i,Banner:c,Businessing:l,Matter:r,Message:u,Shopping:d},data:function(){return{showAbs:!0,styleObject:0,detaildata:{},leaveword:[],messageword:[],nonedata:!1,detaid:"",homeload:!0}},methods:{handleScroll:function(e){if(e>90){var n=e/170;n=n>1?1:n,this.styleObject=n,this.showAbs=!1}else this.showAbs=!0},detailreq:function(e){var n=this;g.where({_id:e}).get().then(function(e){console.log(e);var t={shopid:e.data[0]._id},o=Object.assign(e.data[0].wholedata,t);n.detaildata=o,console.log(n.detaildata),n.homeload=!1}).catch(function(e){console.log(e)})},messagedata:function(e){var n=this;h.where({id:e}).orderBy("messagedata.time","desc").get().then(function(e){console.log(e);var t=e.data;n.classData(t),n.publicMess(t)}).catch(function(e){console.log(e)})},querymessage:function(e,n){var t=this;h.where({id:e,classmessage:n}).orderBy("messagedata.time","desc").get().then(function(e){console.log(e);var n=e.data;t.publicMess(n)}).catch(function(e){console.log(e)})},publicMess:function(e){var n=e.map(function(e){return e.messagedata});console.log(n),this.leaveword=n,0===n.length?this.nonedata=!0:this.nonedata=!1},classData:function(e){var n=e.map(function(e){return e.classmessage});console.log(n),console.log(new Set(n));var t=Array.from(new Set(n)),o=t.filter(function(e){return e});console.log(o),console.log(t),this.messageword=o},pageScroll:function(n){var t=this.createSelectorQuery();t.select(n).boundingClientRect(),t.selectViewport().scrollOffset(),t.exec(function(n){console.log(n),n[0]&&n[1]&&e.pageScrollTo({scrollTop:n[0].top+n[1].scrollTop-35,duration:300})})},fatherMethod:function(e){console.log(e),"全部"==e?this.messagedata(this.detaid):this.querymessage(this.detaid,e)}},onPageScroll:function(e){var n=e.scrollTop;this.handleScroll(n)},onLoad:function(e){console.log(e),this.detaid=e.id,this.detailreq(this.detaid),this.messagedata(this.detaid)},onShareAppMessage:function(e){return{title:"去旅游，上生如夏花旅途小程序",path:"/pages/index/index"}},computed:a({},(0,o.mapState)(["navindex"]),{bannervuex:function(){if(console.log(this.navindex.index),1===this.navindex.index){var e=".matter-page";this.pageScroll(e)}else if(2===this.navindex.index){console.log("2");var n=".message-page";this.pageScroll(n)}}})};n.default=b}).call(this,t("543d")["default"])},"49d7":function(e,n,t){"use strict";(function(e){t("bb5b"),t("921b");o(t("66fd"));var n=o(t("c539"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"58ed":function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},a=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a})},ae05:function(e,n,t){"use strict";t.r(n);var o=t("2967"),a=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);n["default"]=a.a},b0d8:function(e,n,t){"use strict";var o=t("fe3c"),a=t.n(o);a.a},c539:function(e,n,t){"use strict";t.r(n);var o=t("58ed"),a=t("ae05");for(var s in a)"default"!==s&&function(e){t.d(n,e,function(){return a[e]})}(s);t("b0d8");var i=t("2877"),c=Object(i["a"])(a["default"],o["a"],o["b"],!1,null,null,null);n["default"]=c.exports},fe3c:function(e,n,t){}},[["49d7","common/runtime","common/vendor"]]]);