(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/components/message"],{"163e":function(e,n,t){"use strict";t.r(n);var o=t("8a14"),s=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);n["default"]=s.a},"25c9":function(e,n,t){},"3cea":function(e,n,t){"use strict";t.r(n);var o=t("d922"),s=t("163e");for(var a in s)"default"!==a&&function(e){t.d(n,e,function(){return s[e]})}(a);t("634c");var r=t("2877"),i=Object(r["a"])(s["default"],o["a"],o["b"],!1,null,"9a2e54a0",null);n["default"]=i.exports},"634c":function(e,n,t){"use strict";var o=t("25c9"),s=t.n(o);s.a},"8a14":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=s(t("a34a"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return c(e)||i(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function u(e,n,t,o,s,a,r){try{var i=e[a](r),c=i.value}catch(u){return void t(u)}i.done?n(c):Promise.resolve(c).then(o,s)}function l(e){return function(){var n=this,t=arguments;return new Promise(function(o,s){var a=e.apply(n,t);function r(e){u(a,o,s,r,i,"next",e)}function i(e){u(a,o,s,r,i,"throw",e)}r(void 0)})}}var f=function(){return t.e("components/HM-messages/HM-messages").then(t.bind(null,"791b"))},m=function(){return Promise.all([t.e("common/vendor"),t.e("element/modal")]).then(t.bind(null,"b4d6"))},d=t("b244"),g=d.formatTime(new Date),h=wx.cloud.database(),p=h.collection("user"),v={name:"messages",components:{HMmessages:f,motal:m},props:{leaveword:Array,messageword:Array,detaid:String},data:function(){return{btnlist:!0,num:0,Comment:"",newmessage:[],box:!1,avatarUrl:"",nickName:"",ids:"",usermessage:[{head:"http://h.thexxdd.cn/video/postimg.jpg",name:"星星点灯",message:"一路体验很好 虽说是拼车只有一天时间 可是遇到都是很好说话的伙伴 司机兼摄影师小磊小哥哥又帅又负责，拍照技术还杠杠的，顶着大理能烤人的太阳一个个给我们拍照！五星好评没话说！附上美照嘿嘿 ps:运气好碰上了好天气，怎么拍都是大片范儿！"},{head:"http://h.thexxdd.cn/video/postimg.jpg",name:"星星点灯",message:"一路体验很好 虽说是拼车只有一天时间 可是遇到都是很好说话的伙伴 司机兼摄影师小磊小哥哥又帅又负责，拍照技术还杠杠的，顶着大理能烤人的太阳一个个给我们拍照！五星好评没话说！附上美照嘿嘿 ps:运气好碰上了好天气，怎么拍都是大片范儿！"},{head:"http://h.thexxdd.cn/video/postimg.jpg",name:"星星点灯",message:"一路体验很好 虽说是拼车只有一天时间 可是遇到都是很好说话的伙伴 司机兼摄影师小磊小哥哥又帅又负责，拍照技术还杠杠的，顶着大理能烤人的太阳一个个给我们拍照！五星好评没话说！附上美照嘿嘿 ps:运气好碰上了好天气，怎么拍都是大片范儿！"}]}},methods:{popup:function(){var e=this;p.get().then(function(n){if(console.log(n),0==n.data.length)e.$nextTick(function(){e.$refs.mon.init()});else{console.log("已经登录");var t=n.data[0];e.avatarUrl=t.avatarUrl,e.nickName=t.nickName,e.box=!0}}).catch(function(e){console.log(e)})},messcancel:function(){this.box=!1,this.Comment=""},bTn:function(){if(""==this.Comment){var e="评论不能为空",n="error";this.tips(e,n)}else console.log("可以提交"),this.btnlist=!1,this.submit()},submit:function(){var e=l(o.default.mark(function e(){var n,t,s,a,r,i,c;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.aiMessage();case 2:if(n=e.sent,console.log(n),0!==n.length){e.next=11;break}return console.log("不提交"),t="",e.next=9,this.messbase(t);case 9:e.next=18;break;case 11:return console.log(n[n.length-1]),s=n[n.length-1],a=[s.prop,s.adj],r=a[0],i=a[1],console.log(r+i),c=r+i,e.next=18,this.messbase(c);case 18:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),aiMessage:function(){var e=this;return new Promise(function(n,t){wx.cloud.callFunction({name:"aimessage",data:{message:e.Comment}}).then(function(e){console.log(e);var t=e.result.aimessage.items;n(t)}).catch(function(e){t("出错了")})})},messbase:function(e){var n=this;return new Promise(function(t,o){var s={usermess:n.Comment,time:g,avatarUrl:n.avatarUrl,nickName:n.nickName},a=h.collection("message");a.add({data:{id:n.ids,classmessage:e,messagedata:s}}).then(function(e){console.log(e);var t="留言成功",o="success";n.tips(t,o),n.Comment="",n.btnlist=!0;var s="全部";n.$parent.fatherMethod(s)}).catch(function(e){console.log("提交出错")})})},menubtn:function(e,n){console.log(n),this.num=e,this.$parent.fatherMethod(n)},tips:function(e,n){this.HMmessages.show(e,{icon:n,iconColor:"#ffffff",fontColor:"#ffffff",background:"rgba(102, 0, 51,.8)"})}},watch:{messageword:function(e,n){console.log(e),this.newmessage=["全部"].concat(a(e)),this.num=0,console.log(this.newmessage)},detaid:function(e,n){console.log(e),this.ids=e}}};n.default=v},d922:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement,t=(e._self._c,e.__map(e.leaveword,function(n,t){var o=n.time.substr(0,10);return{$orig:e.__get_orig(n),g0:o}}));e._isMounted||(e.e0=function(n){e.btnlist&&e.bTn()},e.e1=function(n){e.HMmessages=e.$refs.HMmessages}),e.$mp.data=Object.assign({},{$root:{l0:t}})},s=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return s})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/details/components/message-create-component',
    {
        'pages/details/components/message-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("3cea"))
        })
    },
    [['pages/details/components/message-create-component']]
]);                
