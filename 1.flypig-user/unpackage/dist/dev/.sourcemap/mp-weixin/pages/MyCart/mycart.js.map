{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/github/2.云开发飞猪旅游(小程序云开发前后端)/flypig-user/pages/MyCart/mycart.vue?c410","webpack:///C:/Users/Administrator/Desktop/github/2.云开发飞猪旅游(小程序云开发前后端)/flypig-user/pages/MyCart/mycart.vue?f028","uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/github/2.云开发飞猪旅游(小程序云开发前后端)/flypig-user/pages/MyCart/mycart.vue?eb46","webpack:///C:/Users/Administrator/Desktop/github/2.云开发飞猪旅游(小程序云开发前后端)/flypig-user/pages/MyCart/mycart.vue?89d8","webpack:///C:/Users/Administrator/Desktop/github/2.云开发飞猪旅游(小程序云开发前后端)/flypig-user/pages/MyCart/mycart.vue?c27e","webpack:///C:/Users/Administrator/Desktop/github/2.云开发飞猪旅游(小程序云开发前后端)/flypig-user/pages/MyCart/mycart.vue?c467","uni-app:///pages/MyCart/mycart.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAu9B,CAAgB,i9BAAG,EAAC,C;;;;;;;;;;;ACA3+B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;kDCNL;AACA;AACA,+F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAupB,CAAgB,4qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0E3qB;AACA;AACA;AACA;;;;AAIA;AACA;AACA,0BADA;AAEA,gBAFA,EADA;;AAKA,MALA,kBAKA;AACA;AACA,mBADA,EACA;AACA,oBAFA,EAEA;AACA,sBAHA,EAGA;AACA,qBAJA,EAIA;AACA,oBALA,EAKA;AACA,oBANA,EAMA;AACA,sBAPA,EAOA;AACA,iBARA,EAQA;AACA,oBATA,EASA;AACA,kBAVA,EAUA;AACA,gBAXA,EAWA;AACA,oBAZA,EAYA;AACA,uBAbA,EAaA;AACA,mBAdA,EAcA;AACA,mBAfA,CAeA;AAfA;AAiBA,GAvBA;AAwBA;AACA;AACA,eAFA,yBAEA;AACA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AACA;AACA;AACA;AACA,OAZA;AAaA,WAbA,CAaA;AACA;AACA,OAfA;AAgBA,KAnBA;AAoBA;AACA,SArBA,iBAqBA,SArBA,EAqBA;AACA,6CADA,SACA,MADA;AAEA,oCAFA;AAGA,KAxBA;AAyBA;AACA,aA1BA,qBA0BA,SA1BA,EA0BA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA,EADA;;;AAKA,cALA,CAKA;AACA;AACA;AACA;AACA;AACA,WAVA;AAWA,eAXA,CAWA;AACA;AACA,WAbA;AAcA,SAfA;AAgBA,OAlBA;AAmBA,KA9CA;AA+CA;AACA,aAhDA,uBAgDA;AACA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA,0CALA,CAKA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA;AACA,4CAJA,CAIA;AACA;AACA;AACA,OAjBA;AAkBA,WAlBA,CAkBA;AACA;AACA,OApBA;AAqBA,KAtEA;AAuEA;AACA,QAxEA,kBAwEA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA/EA;AAgFA;AACA,YAjFA,oBAiFA,OAjFA,EAiFA,EAjFA,EAiFA,UAjFA,EAiFA;AACA,4BADA,CACA;AACA;AACA;AACA,mCAFA,CAEA;AACA,iCAHA,CAGA;AACA;AACA,gBADA;AAEA,gCAFA;;AAIA;AACA,OATA,MASA;AACA,6BADA,CACA;AACA,oCAFA,CAEA;AACA,mDAHA,CAGA;AACA,4CAJA,CAIA;;AAEA,yBANA,CAMA;AACA;AACA;AACA,yCADA,CACA;AACA,SAFA;AAGA;AACA;AACA,KAzGA;AA0GA;AACA,aA3GA,qBA2GA,MA3GA,EA2GA,EA3GA,EA2GA;AACA;AACA;AACA,2BADA,EADA;;;AAKA,UALA,CAKA;AACA;AACA;AACA,OARA;AASA,WATA,CASA;AACA;AACA,OAXA;AAYA,KAxHA;AAyHA;AACA,YA1HA,sBA0HA;AACA,4BADA,CACA;AACA;AACA;AACA,YADA,CACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA,SATA;AAUA,aAVA,CAUA;AACA;AACA,SAZA;AAaA,OAdA;AAeA,KA3IA;AA4IA;AACA,eA7IA,yBA6IA;AACA;AACA;AACA;AACA,6BAFA,CAEA;AACA;AACA;AACA,wBADA;AAEA,uCAFA;;AAIA;AACA,0CANA,CAMA;AACA,oEAPA,CAOA;AACA,SARA;AASA,OAZA,MAYA;AACA;AACA;AACA,6BAHA,CAGA;AACA;AACA,6BALA,CAKA;AACA;AACA,KAlKA;AAmKA;AACA,aApKA,qBAoKA,IApKA,EAoKA;AACA;AACA;AACA;AACA;AACA,2BADA,EADA;;;AAKA,YALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA,SAXA;AAYA,aAZA,CAYA;AACA;AACA,SAdA;AAeA,OAhBA;AAiBA,KAvLA;AAwLA;AACA,QAzLA,gBAyLA,KAzLA,EAyLA,IAzLA,EAyLA,EAzLA,EAyLA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAhMA;AAiMA;AACA,UAlMA,kBAkMA,KAlMA,EAkMA,IAlMA,EAkMA,EAlMA,EAkMA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/MA;AAgNA;AACA,eAjNA,uBAiNA,EAjNA,EAiNA,IAjNA,EAiNA,UAjNA,EAiNA;AACA;AACA;AACA,oBADA;AAEA,gCAFA,EADA;;;AAMA,UANA,CAMA;AACA;AACA;AACA,iBADA;;AAGA,WAHA;AAIA,YAJA,CAIA;AACA;AACA;AACA,kBADA;AAEA,kCAFA;;AAIA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA;;AAEA,SAlBA;AAmBA,aAnBA,CAmBA;AACA;AACA,SArBA;AAsBA;AACA,OA/BA;AAgCA,WAhCA,CAgCA;AACA;AACA,OAlCA;AAmCA,KArPA;AAsPA;AACA,cAvPA,wBAuPA;AACA;AACA,qCADA;AAEA,wBAFA;;AAIA;AACA;AACA,2CADA;;AAGA,KAhQA;AAiQA;AACA,QAlQA,gBAkQA,GAlQA,EAkQA,IAlQA,EAkQA;AACA;AACA,KApQA;AAqQA;AACA,UAtQA,kBAsQA,KAtQA,EAsQA,SAtQA,EAsQA;AACA;AACA;AACA,OAFA;AAGA,KA1QA,EAxBA;;AAoSA,SApSA,qBAoSA;AACA,uBADA,CACA;AACA,GAtSA;AAuSA;AACA;AACA,WAFA,qBAEA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KARA;AASA;AACA,WAVA,qBAUA;AACA;AACA;AACA,OAFA;AAGA;AACA,KAfA;AAgBA;AACA,eAjBA,yBAiBA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,EAHA;AAIA;AACA;AACA;AACA,OAFA;AAGA;AACA,KA5BA,EAvSA;;AAqUA;AACA,UADA,kBACA,QADA,EACA,QADA,EACA;AACA;AACA,+BADA,CACA;AACA,OAFA;AAGA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAVA,EArUA,E","file":"pages/MyCart/mycart.js","sourcesContent":["import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mycart.vue?vue&type=style&index=0&id=0406a806&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mycart.vue?vue&type=style&index=0&id=0406a806&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1638503320821\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/MyCart/mycart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./mycart.vue?vue&type=template&id=0406a806&scoped=true&\"\nvar renderjs\nimport script from \"./mycart.vue?vue&type=script&lang=js&\"\nexport * from \"./mycart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mycart.vue?vue&type=style&index=0&id=0406a806&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0406a806\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/MyCart/mycart.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mycart.vue?vue&type=template&id=0406a806&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.labfale && _vm.placEorder()\n    }\n\n    _vm.e1 = function($event) {\n      _vm.labfale && _vm.deleShop()\n    }\n\n    _vm.e2 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mycart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./mycart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"content\" v-if=\"mycary\">\r\n\t\t\t<view class=\"edit\" @click=\"eDit()\">{{editdata}}</view>\r\n\t\t\t<block v-for=\"(item,index) in shoplist\" :key=\"index\">\r\n\t\t\t\t<view class=\"mycatr-back\">\r\n\t\t\t\t\t<view class=\"content-view\">\r\n\t\t\t\t\t\t<!-- 选择器 -->\r\n\t\t\t\t\t\t<view class=\"mycatr-radio\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/tab/weixuanzhong.svg\" v-if=\"item.Selection == 'hide' \"  @click=\"radioLin(item.Selection,item._id,item.totalPrice)\"></image>\r\n\t\t\t\t\t\t\t<image src=\"../../static/tab/xuanzhong.svg\" v-else  @click=\"radioLin(item.Selection,item._id,item.totalPrice)\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"content-img\">\r\n\t\t\t\t\t\t\t<image :src=\"item.Coverimg\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"content-title\">\r\n\t\t\t\t\t\t\t<text>{{item.title}}</text>\r\n\t\t\t\t\t\t\t<text>出发日期:{{item.datetime}}</text>\r\n\t\t\t\t\t\t\t<text>出发地:{{item.departure}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 价格 -->\r\n\t\t\t\t\t<view class=\"mony-flex\">\r\n\t\t\t\t\t\t<view class=\"mycatr-mony\">￥{{item.price}}</view>\r\n\t\t\t\t\t\t<view class=\"cart-mony\">\r\n\t\t\t\t\t\t\t<text @click=\"reDuce(item.price,item.many,item._id)\">-</text>\r\n\t\t\t\t\t\t\t<text>{{item.many}}</text>\r\n\t\t\t\t\t\t\t<text @click=\"pLus(item.price,item.many,item._id)\">+</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t\t\r\n\t\t\t<!-- 撑出被改的页面 -->\r\n\t\t\t<view style=\"height: 200upx;\"></view>\r\n\t\t\t\r\n\t\t\t<!-- 去下单 -->\r\n\t\t\t<view class=\"shopping\" v-if=\"shopbottom\">\r\n\t\t\t\t<view class=\"shop-view\">\r\n\t\t\t\t\t<view class=\"ridio-quan\">\r\n\t\t\t\t\t\t<image src=\"../../static/tab/weixuanzhong.svg\" v-if=\"alldats == 'hide' \" @click=\"Allelection()\"></image>\r\n\t\t\t\t\t\t<image src=\"../../static/tab/xuanzhong.svg\" v-else-if=\"alldats == 'show' \" @click=\"Allelection()\"></image>\r\n\t\t\t\t\t\t<text>全选</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view>合计:￥{{obtainprice}}</view>\r\n\t\t\t\t\t<view class=\"shopdata\" @click=\"labfale && placEorder()\">\r\n\t\t\t\t\t\t去下单\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 删除 -->\r\n\t\t\t<view class=\"shopping\" v-if=\"!shopbottom\">\r\n\t\t\t\t<view class=\"shop-view\">\r\n\t\t\t\t\t<view></view>\r\n\t\t\t\t\t<view class=\"shopdata\" @click=\"labfale && deleShop()\">\r\n\t\t\t\t\t\t删除\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 提示组件 -->\r\n\t\t\t<HMmessages ref=\"HMmessages\" @complete=\"HMmessages = $refs.HMmessages\" @clickMessage=\"clickMessage\"></HMmessages>\r\n\t\t\t<!-- loading组件 -->\r\n\t\t\t<samll-load v-if=\"samllload\"></samll-load>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 没有数据的提示 -->\r\n\t\t<order ref=\"orderlisty\"></order>\r\n\t\t<home-load v-if=\"homeload\"></home-load>\n\t</view>\r\n</template>\n\n<script>\r\n\t// 引入数据库\r\n\tvar db = wx.cloud.database()\r\n\tvar shopdatabase = db.collection('Shopping')\r\n\t// 引入提示组件\r\n\timport HMmessages from \"@/components/HM-messages/HM-messages.vue\"\r\n\t// 引入没有数据的提示\r\n\timport order from '../../element/order.vue'\r\n\texport default{\r\n\t\tcomponents:{\r\n\t\t\tHMmessages,\r\n\t\t\torder\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmycary:false, //控制数据是否显示\r\n\t\t\t\thomeload:true,//页面loding\r\n\t\t\t\tsamllload:false, //选中切换的小loading\r\n\t\t\t\talldats:'hide', //默认商品不选中\r\n\t\t\t\tlabfale:false, //控制是否可以点击删除和去下单\r\n\t\t\t\teditdata:'编辑',//默认显示可编辑\r\n\t\t\t\tshopbottom:true, //控制是否显示 去下单\r\n\t\t\t\tcurrent:'', //是否选中标识\r\n\t\t\t\tindexArray:[],// 选中的数据的id数组\r\n\t\t\t\tshoplist:[], //商品数据\r\n\t\t\t\tselect:'',// 监听全选和取消全选\r\n\t\t\t\tobtainprice:0,  //点击单个得到的总价\r\n\t\t\t\tarrtotalPrice:[],//点击得到的总价数组\r\n\t\t\t\tfandsdata:{},  //全选push进的id和价格\r\n\t\t\t\tDuplicate:[],//全部选中时数组id去重接收\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 请求购物车数据库数据\r\n\t\t\tfinalchange(){\r\n\t\t\t\tshopdatabase.get()\r\n\t\t\t\t.then((res)=>{\r\n\t\t\t\t\tif(res.data.length === 0){ // 是否有数据，没有显示提示\r\n\t\t\t\t\t\tthis.homeload = false\r\n\t\t\t\t\t\tthis.mycary = false\r\n\t\t\t\t\t\tlet value = true\r\n\t\t\t\t\t\tlet orderdata = '购物车空空如也！'\r\n\t\t\t\t\t\tthis.nohint(value,orderdata)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlet shopDatas = res.data\r\n\t\t\t\t\t\tthis.setUp(shopDatas)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 进入页面把选中的字段变未选中\r\n\t\t\tasync setUp(shopDatas){\r\n\t\t\t\tlet Result = await this.forchange(shopDatas)\r\n\t\t\t\tawait this.shopdatas()\r\n\t\t\t},\r\n\t\t\t// 循环更改所有字段为hide\r\n\t\t\tforchange(shopDatas){\r\n\t\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t\tvar frequency = 0\r\n\t\t\t\t\tshopDatas.forEach((item)=>{\r\n\t\t\t\t\t\tshopdatabase.doc(item._id).update({\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t    Selection:'hide'\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\t\tfrequency++\r\n\t\t\t\t\t\t\tif(frequency === shopDatas.length){\r\n\t\t\t\t\t\t\t\tresolve('success')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 得到最终结果\r\n\t\t\tshopdatas(){\r\n\t\t\t\tshopdatabase.get()\r\n\t\t\t\t .then((res)=>{\r\n\t\t\t\t\t if(res.data.length != 0){\r\n\t\t\t\t\t\t this.shoplist = res.data\r\n\t\t\t\t\t\t this.mycary = true\r\n\t\t\t\t\t\t let value = false\r\n\t\t\t\t\t\t let orderdata = ''\r\n\t\t\t\t\t\t this.nohint(value,orderdata)// 弹出提示\r\n\t\t\t\t\t\t this.homeload = false\r\n\t\t\t\t\t\t return\r\n\t\t\t\t\t }else{\r\n\t\t\t\t\t\t this.mycary = false\r\n\t\t\t\t\t\t let value = true\r\n\t\t\t\t\t\t let orderdata = '购物车空空如也！'\r\n\t\t\t\t\t\t this.nohint(value,orderdata)// 弹出提示\r\n\t\t\t\t\t\t this.homeload = false\r\n\t\t\t\t\t }\r\n\t\t\t\t })\r\n\t\t\t\t .catch((err)=>{\r\n\t\t\t\t\t console.log(err)\r\n\t\t\t\t })\r\n\t\t\t},\r\n\t\t\t// 编辑删除购物车商品\r\n\t\t\teDit(){\r\n\t\t\t\tthis.editdata = this.editdata == '完成' ? '编辑' : '完成'\r\n\t\t\t\tif(this.editdata == '完成'){\r\n\t\t\t\t\tthis.shopbottom = false\r\n\t\t\t\t}else if(this.editdata == '编辑'){\r\n\t\t\t\t\tthis.shopbottom = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 选中商品\r\n\t\t\tradioLin(current,id,totalPrice){\r\n\t\t\t\tthis.samllload = true // 选中图标显示loading\r\n\t\t\t\tif(current == 'hide'){\r\n\t\t\t\t\tlet ldlist = 'show'\r\n\t\t\t\t\tthis.selecTion(ldlist,id)\t//调用改变数据库是否选中标识方法\r\n\t\t\t\t\tthis.indexArray.push(id)// 把选中的数据的id放在数组里\r\n\t\t\t\t\tlet fands = {// 创建一个数组对象，把得到的总价和当前id放到数组里，每点击一个依次遍历相加，【数组求和】\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\ttotalPrice\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.arrtotalPrice.push(fands)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet ldlist = 'hide'// 选中变未选中\r\n\t\t\t\t\tthis.selecTion(ldlist,id) //调用改变数据库是否选中标识方法\r\n\t\t\t\t\tvar indexkml = this.indexArray.indexOf(id);// 找到数组里具体某项\r\n\t\t\t\t\tthis.indexArray.splice(indexkml, 1) //删除指定项\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar arrid = [id] //把id放在数组里 ->[\"9e7190f161834b080398b95475381201\"]\r\n\t\t\t\t\t// filter用于对数组进行过滤。 它创建一个新数组,新数组中的元素是通过检查指定数组中符合条件的所有元素。 注意:filter()不会对空数组进行检测、不会改变原始数组\r\n\t\t\t\t\tlet findarr = this.arrtotalPrice.filter((val)=>{// 取消单个选中找到对应id数组删掉[计算总价]\r\n\t\t\t\t\t\treturn !arrid.includes(val.id)  // includes() 方法用于判断字符串是否包含指定的子字符串\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.arrtotalPrice = findarr \r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 单个选中和未选中操作数据库改变数据库标识方法\r\n\t\t\tselecTion(ldlist,id){\r\n\t\t\t\tshopdatabase.doc(id).update({\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t    Selection:ldlist\r\n\t\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t\t.then((res)=>{\r\n\t\t\t\t\tthis.shopdatas()\r\n\t\t\t\t\tthis.samllload = false\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 删除选中的商品\r\n\t\t\tdeleShop(){\r\n\t\t\t\tthis.samllload = true // 正在操作的loading\r\n\t\t\t\tthis.indexArray.forEach((item)=>{\r\n\t\t\t\t\tshopdatabase.doc(item).remove()\r\n\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\tthis.indexArray = []\r\n\t\t\t\t\t\tthis.shopdatas()\r\n\t\t\t\t\t\tlet findarr = this.arrtotalPrice.filter((val)=>{\r\n\t\t\t\t\t\t\treturn !item.includes(val.id)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.arrtotalPrice = findarr\r\n\t\t\t\t\t\tthis.samllload = false\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 全选和取消全选\r\n\t\t\tAllelection(){\r\n\t\t\t\tthis.samllload = true\r\n\t\t\t\tif(this.alldats == 'hide'){\r\n\t\t\t\t\tlet show = 'show'\r\n\t\t\t\t\tthis.publicAll(show)//全选\r\n\t\t\t\t\tthis.shoplist.forEach((item)=>{// 全选计算总价\r\n\t\t\t\t\t\t\tlet fandsdata = {\r\n\t\t\t\t\t\t\t\tid:item._id,\r\n\t\t\t\t\t\t\t\ttotalPrice:item.totalPrice\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.arrtotalPrice.push(fandsdata)\r\n\t\t\t\t\t\t\tthis.Duplicate.push(item._id)// 把id添加进数组\r\n\t\t\t\t\t\t\tthis.indexArray = Array.from(new Set(this.Duplicate))//方便全体删除，添加时数组去重\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet show = 'hide'\r\n\t\t\t\t\tthis.publicAll(show)\r\n\t\t\t\t\tthis.obtainprice = 0// 取消全选计算总价\r\n\t\t\t\t\tthis.arrtotalPrice = []\r\n\t\t\t\t\tthis.indexArray = []// 清空装有id值的数组\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 全选和取消全选的操作方法\r\n\t\t\tpublicAll(show){\r\n\t\t\t\tvar frequency = 0\r\n\t\t\t\tthis.shoplist.forEach((item)=>{\r\n\t\t\t\t\tshopdatabase.doc(item._id).update({\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t    Selection:show\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\tfrequency++\r\n\t\t\t\t\t\tif(frequency === this.shoplist.length){\r\n\t\t\t\t\t\t\tthis.shopdatas()\r\n\t\t\t\t\t\t\tthis.samllload = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 加价\r\n\t\t\tpLus(price,many,id){\r\n\t\t\t\t// 加价加loading\r\n\t\t\t\tthis.samllload = true\r\n\t\t\t\tmany++\r\n\t\t\t\tvar totalPrice = price * many\r\n\t\t\t\tthis.publicPrice(id,many,totalPrice)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 减价\r\n\t\t\treDuce(price,many,id){\r\n\t\t\t\tif(many === 1){\r\n\t\t\t\t\t// 给予提示\r\n\t\t\t\t\tlet tip = '购买数量最少为1'\r\n\t\t\t\t\tlet icon = 'danger'\r\n\t\t\t\t\tthis.tips(tip,icon)\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 减价加loading\r\n\t\t\t\t\tthis.samllload = true\r\n\t\t\t\t\tmany--\r\n\t\t\t\t\tvar totalPrice = price * many\r\n\t\t\t\t\tthis.publicPrice(id,many,totalPrice)\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 加减价公用函数\r\n\t\t\tpublicPrice(id,many,totalPrice){\r\n\t\t\t\tshopdatabase.doc(id).update({\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t    many,\r\n\t\t\t\t\t\ttotalPrice\r\n\t\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t// 数据库更新成功取到当前点击的总价\r\n\t\t\t\t\tshopdatabase.where({\r\n\t\t\t\t\t\t_id:id\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.get()\r\n\t\t\t\t\t.then((res)=>{\r\n\t\t\t\t\t\tlet totalPrice = res.data[0].totalPrice\r\n\t\t\t\t\t\tlet fands = {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\ttotalPrice\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 查询已点击的数组id，匹配上，替换总价\r\n\t\t\t\t\t\tlet findarr = this.arrtotalPrice.map((item)=>{\r\n\t\t\t\t\t\t\t\treturn item.id == id ? fands : item\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.arrtotalPrice = findarr\r\n\t\t\t\t\t\t// 取消loading\r\n\t\t\t\t\t\tthis.samllload = false\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.shopdatas()\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 下单\r\n\t\t\tplacEorder(){\r\n\t\t\t\tlet ids = {// 携带总价和这是购物页面跳转的\r\n\t\t\t\t\tobtainprice:this.obtainprice,\r\n\t\t\t\t\tpage:'Shopping'\r\n\t\t\t\t}\r\n\t\t\t\tlet objids = JSON.stringify(ids)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../order/order?ids=' + objids\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 提示框\r\n\t\t\ttips(tip,icon){\r\n\t\t\t\tthis.HMmessages.show(tip,{icon:icon,iconColor:\"#ffffff\", fontColor:\"#ffffff\", background:\"rgba(102, 0, 51,.8)\"})\r\n\t\t\t},\r\n\t\t\t// 提示没有数据的\r\n\t\t\tnohint(value,orderdata){\r\n\t\t\t\tthis.$nextTick(()=>{   //dom更新循环结束之后的延迟回调\r\n\t\t\t\t\tthis.$refs.orderlisty.init(value,orderdata)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.finalchange()// 调用购物车数据库\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t// 监听如果未选中任何一个禁用删除按钮和下单按钮\r\n\t\t\tdeleBtn(){\r\n\t\t\t\tif(this.indexArray.length == 0){\r\n\t\t\t\t\tthis.labfale = false\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.labfale = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 监听是否全选\r\n\t\t\tallList(){\r\n\t\t\t\tlet select = this.shoplist.map((cars)=>{\r\n\t\t\t\t\treturn cars.Selection;\r\n\t\t\t\t})\r\n\t\t\t\tthis.select = select\r\n\t\t\t},\r\n\t\t\t// 监听总价计算\r\n\t\t\tCalculation(){\r\n\t\t\t\tlet hash = {};\r\n\t\t\t\tconst hashdata = this.arrtotalPrice.reduce((preVal, curVal) => {// 数组对象去重\r\n\t\t\t\t    hash[curVal.id] ? '' : hash[curVal.id] = true && preVal.push(curVal); \r\n\t\t\t\t    return preVal \r\n\t\t\t\t}, [])\r\n\t\t\t\tlet numdata = 0\r\n\t\t\t\thashdata.forEach((item)=>{// 总价计算\r\n\t\t\t\t\tnumdata += item.totalPrice\r\n\t\t\t\t})\r\n\t\t\t\tthis.obtainprice = parseFloat((numdata).toFixed(10))\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tselect(newValue, oldValue){\r\n\t\t\t\tvar identical = newValue.every((item)=>{\r\n\t\t\t\t\treturn item === 'show' // 判断数组里的Selection值是否都为同一个值\r\n\t\t\t\t})\r\n\t\t\t\tif(identical === true){\r\n\t\t\t\t\tthis.alldats = 'show'\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.alldats = 'hide'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\ttext{display: block;}\r\n\t.content-view{display: flex; justify-content: space-between;\r\n\theight: 130upx !important; overflow: hidden;\r\n\t}\r\n\t.mycatr-back{margin-bottom: 20upx;\r\n\tbackground: #fafafa;\r\n\tpadding: 20upx;}\r\n\t.content-img{width: 250upx !important; height: 130upx !important;\r\n\t}\r\n\t.content-img image{width: 100%; height: 100%;}\r\n\t.content-title{\r\n\twidth: 100%;\r\n\tpadding-left: 10upx;\r\n\t}\r\n\t.content-title text:nth-child(1){\r\n\t\tfont-size: 30upx;\r\n\t\tfont-weight: bold;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t-webkit-line-clamp: 1;\r\n\t\toverflow: hidden;\r\n\t\tpadding-top: 0;\r\n\t\tcolor: #333333;\r\n\t}\r\n\t.content-title text{\r\n\t\tfont-size: 28upx;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\toverflow: hidden;\r\n\t\tpadding-top: 9upx;\r\n\t\tcolor: #a5a5a5;\r\n\t}\r\n\t.edit{font-size: 30upx; display: flex; justify-content: flex-end;\r\n\theight: 70upx;\r\n\tline-height: 70upx;\r\n\tpadding-right: 20upx;}\r\n\t/* 选择器 */\r\n\t.mycatr-radio{background: #fafafa; height: 130upx;\r\n\tline-height: 130upx;\r\n\ttext-align: center;\r\n\twidth: 50upx !important;\r\n\tpadding-right: 20upx;\r\n\t}\r\n\t.mycatr-radio image{width: 50upx !important; height: 50upx !important; border-radius: 50%;}\r\n\tradio{width: 50upx !important;}\r\n\t/* 价格 */\r\n\t.cart-mony{display: flex; align-items: center;\r\n\tjustify-content: space-around;\r\n\ttext-align: center;}\r\n\t.cart-mony text{background: #ededed; padding: 0 25upx; height: 60upx;\r\n\tline-height: 60upx;\r\n\tborder-radius: 6upx;}\r\n\t.cart-mony text:nth-child(2){background: none; padding: 0 10upx; flex-grow: 2;}\r\n\t.mony-flex{display: flex; justify-content: space-between;\r\n\tbackground: #fafafa;\r\n\theight: 70upx;\r\n\talign-items: center;}\r\n\t.mycatr-mony{padding-left: 100upx; color: #ff5000;}\r\n\t/* 加入购物车 */\r\n\t.shopping{width: 100%; background: #fafafa;\r\n\tborder-top: 1rpx solid #e5e5e5;\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\t}\r\n\t.shopdata{background: #ff5000;\r\n\theight: 90upx; line-height: 90upx; width: 250upx;\r\n\tcolor: #ffffff;\r\n\tfont-weight: 100;\r\n\t}\r\n\t\r\n\t.shop-view{display: flex; justify-content: space-between; align-items: center;\r\n\ttext-align: center;\r\n\tfont-size: 30upx;\r\n\tpadding-left: 20upx;\r\n\tcolor: #ff5000;\r\n\tfont-weight: bold;}\r\n\t.ridio-quan{display: flex; align-items: center;}\r\n\t.ridio-quan image{width: 50upx !important; height: 50upx !important; border-radius: 50%;}\r\n\t.ridio-quan text{padding-left: 6upx;}\n</style>\n"],"sourceRoot":""}