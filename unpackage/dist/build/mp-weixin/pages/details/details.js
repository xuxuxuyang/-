(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/details"],{"1d04":function(e,t,n){"use strict";n.r(t);var o=n("9494"),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);t["default"]=a.a},"58c9":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},8854:function(e,t,n){"use strict";(function(e){n("bb5b"),n("921b");o(n("66fd"));var t=o(n("c2d7"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},9494:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){return n.e("pages/details/components/navs").then(n.bind(null,"1c9e"))},i=function(){return Promise.all([n.e("common/vendor"),n.e("pages/details/components/banner")]).then(n.bind(null,"ab3b"))},l=function(){return n.e("pages/details/components/matter").then(n.bind(null,"5d49"))},r=function(){return Promise.all([n.e("common/vendor"),n.e("pages/details/components/message")]).then(n.bind(null,"3cea"))},u=wx.cloud.database(),d=u.collection("userdata"),f=u.collection("message"),g={components:{Navs:c,Banner:i,Matter:l,Message:r},data:function(){return{showAbs:!0,styleObject:0,detaildata:{},leaveword:[],messageword:[],nonedata:!1,detaid:"",homeload:!0}},methods:{handleScroll:function(e){if(e>90){var t=e/170;t=t>1?1:t,this.styleObject=t,this.showAbs=!1}else this.showAbs=!0},detailreq:function(e){var t=this;d.where({_id:e}).get().then(function(e){console.log(e),t.detaildata=e.data[0].datainfo,console.log(t.detaildata),t.homeload=!1}).catch(function(e){console.log(e)})},messagedata:function(e){var t=this;f.where({id:e}).orderBy("messagedata.time","desc").get().then(function(e){console.log(e);var n=e.data;t.classData(n),t.publicMess(n)}).catch(function(e){console.log(e)})},querymessage:function(e,t){var n=this;f.where({id:e,classmessage:t}).orderBy("messagedata.time","desc").get().then(function(e){console.log(e);var t=e.data;n.publicMess(t)}).catch(function(e){console.log(e)})},publicMess:function(e){var t=e.map(function(e){return e.messagedata});console.log(t),this.leaveword=t,0===t.length?this.nonedata=!0:this.nonedata=!1},classData:function(e){var t=e.map(function(e){return e.classmessage});console.log(t),console.log(new Set(t));var n=Array.from(new Set(t)),o=n.filter(function(e){return e});console.log(o),console.log(n),this.messageword=o},pageScroll:function(t){var n=this.createSelectorQuery();n.select(t).boundingClientRect(),n.selectViewport().scrollOffset(),n.exec(function(t){console.log(t),t[0]&&t[1]&&e.pageScrollTo({scrollTop:t[0].top+t[1].scrollTop-35,duration:300})})},fatherMethod:function(e){console.log(e),"全部"==e?this.messagedata(this.detaid):this.querymessage(this.detaid,e)}},onPageScroll:function(e){var t=e.scrollTop;this.handleScroll(t)},onLoad:function(e){console.log(e),this.detaid=e.id,this.detailreq(this.detaid),this.messagedata(this.detaid)},onShareAppMessage:function(e){return{title:"去旅游，上生如夏花旅途小程序",path:"/pages/index/index"}},computed:a({},(0,o.mapState)(["navindex"]),{bannervuex:function(){if(console.log(this.navindex.index),1===this.navindex.index){var e=".matter-page";this.pageScroll(e)}else if(2===this.navindex.index){console.log("2");var t=".message-page";this.pageScroll(t)}}})};t.default=g}).call(this,n("543d")["default"])},a09c:function(e,t,n){"use strict";var o=n("bc49"),a=n.n(o);a.a},bc49:function(e,t,n){},c2d7:function(e,t,n){"use strict";n.r(t);var o=n("58c9"),a=n("1d04");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("a09c");var c=n("2877"),i=Object(c["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=i.exports}},[["8854","common/runtime","common/vendor"]]]);